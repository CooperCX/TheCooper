## Makefile
* Makefile文件定义了编译规则，实现自动化编译，提高开发效率
* 使用make工具解释Makefile文件中的指令，完成自动编译
* 命名规则：Makefile/makefile
* 书写规则：
    * 一个Makefile文件中可有一个或多个规则
    * 其他规则一般都是为第一条规则服务
    ```
    targets : dependencies...
        shell 命令
    ```
* 工作原理：
    * 命令在执行前，需要先检查规则中的依赖是否存在
        * 如果存在，执行命令
        * 如果不存在，向下检查其他规则，是否有用来生成需要的依赖的规则，如果有则执行
    * 检测更新，在执行规则中命令时，比较目标和依赖的更新时间
        * 依赖早于目标，目标不需要更新，规则中的命令不需要执行
        * 依赖晚于目标，需要重新生成目标

* 变量：
    * 自定义变量：
        * 变量名 = 变量值
    * 自动变量：
        * AR：归档维护程序的名称
        * CC：C编译器的名称
        * CXX：C++编译器的名称
        * $@：目标的完整名称
        * $<：第一个依赖的名称
        * $^：所有的依赖文件
    * 获取变量值：$(变量名)
    ```
    app: main.c a.c b.c
        gcc main.c a.c b.c -o app

    src=main.c a.c b.c
    target=app
    # 自动变量只能在规则命令中使用
    $(taerget): $(src)
        $(CC) $^ -o $@
    ```
* 模式匹配
    * 通配符%：匹配一个字符串
* 函数
    * wildcard, 获取指定目录下指定类型的文件列表
    ```
        src = $(wilgcard *.c ./src/*.c)
        src = a.c b.c
    ```
    * patsubst, 查找第三个参数中的单词，是否匹配第一个参数中的模式，如果匹配则被替换成第二个参数的模式
    ```
        objs = $(patsubst, *.c, *.o, a.c b.c)
        objs = a.o b.o
    ```
