# 算法框架

## TensorFlow

* TensorFlow是什么？
    - 是一个基于Python的深度学习框架，用于创建机器/深度学习算法。
    - TensorFlow = Tensor(张量) + Flow(流)

* TensorFlow的特点是什么？
    - 丰富算法API：内置了能用到的大部分算法
    - 可移植性：支持Linux、Mac、window、移动端平台，CPU或GPU（配置环境变量参数CUDA_VISIABLE_DEVICES）
    - 编程扩展性：支持多语言，python、C++、Go等
    - 以及完善的技术文档

* Tensor张量是什么？
    - 表示n维数组的向量或矩阵的泛化。
    - 三种张量：常量张量、变量张量、占位符张量

* 变量张量与占位符张量的区别是什么？
    - variable需要初始化，placeholder不需要初始化
    - variable随时间变化，placeholder不随时间变化的特定输入数据

* TensorBoard是什么？
    - 数据可视化工具，Dashboard跟踪模型指标（损失、精度）
    - 查看图像文本音频等非图表数据
    - 高维数据向低维投影

* TensorFlow 架构的三个工作组件是什么？
    - 数据预处理
    - 模型训练
    - 模型验证

* tensorflow如何加载数据？
    - 预加载数据：将数据加载到张量中
    - 填充数据：使用sess.run()中的feed_dict参数
    - 读取文件数据：先写入到TFRecords中，再解码使用

* TensorFlow和PyTorch有什么区别？
```
| TensorFlow | PyTorch |
| 基于Theano库 | 基于Torch库 |
```

* TensorFlow常用函数
    - 数学函数：Add, Sub, Mul, Exp, Log, Greater, Less, Equal
    - 数组操作：cast, Concat, Slice, Split, Shape, Shuffle
    - 矩阵操作：matmul, Matrix_inverse, Matrix_Determinant
    - 神经网络：激活函数relu, sigmoid、卷积操作conv2d\conv3d、池化操作avg/max_pool、归一化normalize

## TensorRT

* TensorRT是什么？
    - 是Nvidia提供的C++推理框架。将训练好的模型转为TensorRT格式，使用TensorRT推理引擎运行，提升模型在Nvidia GPU上的性能
    - 由C++、CUDA、python编写而成，核心代码为C++、CUDA

* TensorRT为什么能提升性能？
    - 算子融合：合并或去除一些计算操作，减少数据流通和显存频繁使用
    - 量化：不同于常规FP32精度，使用INT8、FP16、TF32等精度提升模型性能，保持模型精度
    - 内核调整：根据硬件选择不同的优化策略和计算方式
    - 动态张量显存：减少模型中现存的开辟和释放
    - 多流执行：stream技术最大化并行操作

* 模型怎么转为TensorRT格式？
    - TensorFlow集成的TF-TRT
    - ONNX2TensorRT
    - Pytorch -> ONNX -> TensorRT
    - torch2trt\torch2trt_dynamic\TRTorch

* 使用TensorRT的方式?
    - TensorFlow集成的TF-TRT，加速效果不是很好
    - 在TensorRT Runtime环境中运行模型
    - 搭配服务器triton-server使用

* TensorRT支持哪几种权重精度？
    - FP32：单精度浮点型，最常见
    - FP16：半精度浮点型，相比FP32内存占用减少一半，速度快很多
    - INT8：整型，相比FP16内存占用减少一半，模型量化后可以使用INT8加速
    - TF32：截短的FP32类型


## 跟踪算法 MOT
* Sort：卡尔曼滤波（预测、更新） + 匈牙利算法（匹配，代价矩阵）
    * 关键步骤：通过卡尔曼滤波预测track目标下一帧的位置，使用匈牙利算法和当前帧中的detection进行匹配（IOU），没有匹配的track将保留一段时间后删除，没有匹配的detection将成为新的track，匹配上的track将使用卡尔曼滤波更新
    * 卡尔曼滤波：每个track分配一个卡尔曼滤波器

    * 匈牙利算法：二分图匹配算法
        * 代价矩阵：IOU，Re-ID，马氏距离